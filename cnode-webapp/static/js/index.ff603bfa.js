webpackJsonp([1],{0:function(t,e,n){t.exports=n("msSN")},1:function(t,e){},"5dq4":function(t,e){},"5e9e":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"state",function(){return r}),n.d(e,"mutations",function(){return a});var r=function(){return{enable:!0,type:"none",effect:"none"}},a={setType:function(t,e){t.type=e},setEffect:function(t,e){t.effect=e}}},CJsk:function(t,e){},IxwT:function(t,e){},LOWA:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"SET_PAGE_SCROLL_POSITION",function(){return s}),n.d(e,"state",function(){return c}),n.d(e,"mutations",function(){return u}),n.d(e,"actions",function(){return l});var r=n("a3Yh"),a=n.n(r),o=n("4YfN"),i=n.n(o),s="SET_PAGE_SCROLL_POSITION",c=function(){return{scrollPostionMap:{}}},u=a()({},s,function(t,e){var n=e.pageId,r=e.scrollPosition;t.scrollPostionMap=i()({},t.scrollPostionMap,a()({},n,r))}),l={savePageScrollPosition:function(t,e){var n=t.commit,r=e.pageId,a=e.scrollPosition;n(s,{pageId:r,scrollPosition:a})}}},StHe:function(t,e){},Uz7q:function(t,e){t.exports={buildVersion:1568963367861,build:{ssr:!1,publicPath:"/",compress:!0,cssExtract:!0},middleware:{all:[],server:[],client:[]},router:{mode:"history",base:"/cnode-webapp/",pageTransition:{type:"fade",transitionClass:"fade"}},errorHandler:{defaultErrorMessage:"Internal Server Error",showRealErrorMessage:!1,errorPath:"/error"},serviceWorker:{enable:!0,swDest:"F:\\work_space_vue\\cnode-webapp\\dist\\service-worker.js"},skeleton:{enable:!0,asyncCSS:!0}}},VfP6:function(t,e,n){var r={"./pageTransition.js":"5e9e","./scrollBehavior.js":"LOWA"};function a(t){return n(o(t))}function o(t){var e=r[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}a.keys=function(){return Object.keys(r)},a.resolve=o,t.exports=a,a.id="VfP6"},fdRL:function(t,e){},jPuP:function(t,e){},ky1B:function(t,e){},msSN:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("rVsN"),a=n.n(r),o=n("IHPB"),i=n.n(o),s=n("lC5x"),c=n.n(s),u=n("J0Oq"),l=n.n(u),f=n("EqYI"),p=n("Umb+"),h=function(){var t=l()(c.a.mark(function t(e){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{});case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}();function d(t,e){var n={isClient:!0,app:e,store:t.store,route:t.to,from:t.from},r=t.next;return n.params=n.route.params||{},n.query=n.route.query||{},n.redirect=function(t){var e=t.status,a=void 0===e?302:e,o=t.path,i=void 0===o?"":o,s=t.query,c=void 0===s?{}:s,u=t.external,l=void 0!==u&&u;n._redirected=!0,r({path:i,query:c,status:a,external:l})},n}var v=function(){var t=l()(c.a.mark(function t(e,n){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=0;case 1:if(!(r<e.length)){t.next=9;break}if(!n._redirected){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,m(e[r],n);case 6:r++,t.next=1;break;case 9:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}();function m(t,e){var n=void 0;return 2===t.length?n=new a.a(function(n,r){t(e,function(t,a){t?(e.error(t),r(t)):n(a)})}):(n=t(e))&&(n instanceof a.a||"function"==typeof n.then)||(n=a.a.resolve(n)),n}var g=n("Uz7q"),w=n.n(g),y=n("4YfN"),b=n.n(y),_=n("Xszj"),x=n.n(_),T=n("cigS"),k={name:"appshell",metaInfo:{title:"Lavas",meta:[{name:"keywords",content:"lavas PWA"},{name:"description",content:"基于 Vue 的 PWA 解决方案，帮助开发者快速搭建 PWA 应用，解决接入 PWA 的各种问题"}],bodyAttrs:{"empty-appshell":void 0}}},P=n("W5g0"),E=Object(P.a)(k,function(){var t=this.$createElement;return(this._self._c||t)("div")},[],!1,null,null,null).exports,C=n("ZLEe"),L=n.n(C),S={name:"error",computed:{message:function(){return this.$route.params.error||"您访问的路径不存在"}},created:function(){var t=this.$route.query;0!==L()(t).length&&this.$router.replace({name:"error",params:t})}};var j=function(t){n("fdRL")},A=Object(P.a)(S,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page-error"},[e("p",[this._v(this._s(this.message))])])},[],!1,j,"data-v-3a3e5021",null).exports,I=n("Muz9"),$=n.n(I),M={getData:function(){var t=l()(c.a.mark(function t(e){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$()({url:"https://cnodejs.org/api/v1/topics?",method:"get",params:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},O=n("NjZ5"),W=n("3Zjm");f.a.use(O.a,{loading:"static/img/default-person.png",error:"static/img/default-person.png"}),f.a.use(W.a,{name:"Timeago",locale:"en",locales:{"zh-CN":n("QM7U"),ja:n("UcIe")}});var D={props:{dataList:{type:Array,default:null}},data:function(){return{}},methods:{}};var q=function(t){n("ky1B")},R={components:{DataList:Object(P.a)(D,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"topic-list"},t._l(t.dataList,function(e,r){return n("li",{key:r,staticClass:"topic-item"},[n("div",{staticClass:"info"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.author.avatar_url,expression:"topic.author.avatar_url"}],staticClass:"user-avatar",attrs:{alt:"用户头像"}}),t._v(" "),n("div",{staticClass:"content"},[n("p",{staticClass:"c-info"},[n("span",{staticClass:"name"},[t._v(t._s(e.author.loginname))]),t._v(" "),n("span",{staticClass:"status"},[n("b",[t._v(t._s(e.reply_count))]),t._v("\n                        /"+t._s(e.visit_count)+"\n                    ")])]),t._v(" "),n("p",{staticClass:"t-content"},[t._v(t._s(e.title))]),t._v(" "),n("p",[n("timeago",{attrs:{datetime:e.last_reply_at,locale:"zh-CN"}})],1)])])])}),0)},[],!1,q,null,null).exports},data:function(){return{loading:!1,finished:!1,error:!1,refreshing:!1,tabs:[{title:"全部",topic:"ask",dataList:[],page:1},{title:"精华",topic:"good",dataList:[],page:1},{title:"分享",topic:"share",dataList:[],page:1},{title:"问答",topic:"ask",dataList:[],page:1},{title:"招聘",topic:"job",dataList:[],page:1},{title:"测试",topic:"share",dataList:[],page:1}],activeTopic:0,dataList:[]}},methods:{onLoad:function(){this._getData()},onChange:function(t,e){this._getData()},_getData:function(){var t=this,e=this.tabs[this.activeTopic];M.getData({tab:e.topic,page:e.page,limit:10}).then(function(n){console.log(n.data.success);var r=[];n.data.success?(r=n.data.data||[],t.finished=r.length<10,1==e.page?t.tabs[t.activeTopic].dataList=r:t.tabs[t.activeTopic].dataList=t.tabs[t.activeTopic].dataList.concat(r),t.refreshing=!1,t.loading=!1,t.tabs[t.activeTopic].page++):(r=[],t.finished=!0,t.error=!0,t.refreshing=!1,t.loading=!1)})},onRefresh:function(){this.tabs[this.activeTopic].page=1,this._getData()}}};var N=function(t){n("IxwT")},z=Object(P.a)(R,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-tabs",{attrs:{sticky:"",color:"#80bd01",background:"#444444","title-inactive-color":"#ffffff","title-active-color":"#80bd01",animated:"",swipeable:""},on:{change:t.onChange},model:{value:t.activeTopic,callback:function(e){t.activeTopic=e},expression:"activeTopic"}},t._l(t.tabs,function(e,r){return n("van-tab",{key:r,attrs:{title:e.title}},[n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了",error:t.error,"error-text":"请求失败，点击重新加载"},on:{"update:error":function(e){t.error=e},load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[n("data-list",{attrs:{dataList:e.dataList}})],1)],1)],1)}),1)},[],!1,N,null,null).exports;var B={name:"index",metaInfo:{title:"CNode哈哈社区",titleTemplate:"%s - Lavas",meta:[{name:"keywords",content:"lavas PWA"},{name:"description",content:"基于 Vue 的 PWA 解决方案，帮助开发者快速搭建 PWA 应用，解决接入 PWA 的各种问题"}]},asyncData:function(){var t=l()(c.a.mark(function t(e){e.store,e.route;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),components:{Home:z}};var U=function(t){n("jPuP")},V=[{path:"/appshell",component:E,meta:{},name:"appshell"},{path:"/",component:Object(P.a)(B,function(){var t=this.$createElement;return(this._self._c||t)("home")},[],!1,U,"data-v-0c23ebcf",null).exports,meta:{},name:"index"},{path:"/error",component:A,meta:{},name:"error",alias:"*"}];f.a.use(T.a);var F=function(t,e,n){if(n)return n;var r={};return t.hash&&(r.selector=t.hash),t.matched.some(function(t){return t.meta.scrollToTop})&&(r.x=0,r.y=0),r},H=V.filter(function(t){return t.keepAlive||t.meta.keepAlive}).map(function(t){return t.name});var J=n("aA9S"),Y=n.n(J),K=n("HzJ8"),Z=n.n(K),G=n("HVJf");f.a.use(G.a);var X=n("VfP6"),Q=X.keys(),tt={},et=!0,nt=!1,rt=void 0;try{for(var at,ot=Z()(Q);!(et=(at=ot.next()).done);et=!0){var it=at.value;if("./index.js"===it){tt=gt(it);break}}}catch(t){nt=!0,rt=t}finally{try{!et&&ot.return&&ot.return()}finally{if(nt)throw rt}}if("function"!=typeof tt){tt.modules=tt.modules||{};var st=!0,ct=!1,ut=void 0;try{for(var lt,ft=Z()(Q);!(st=(lt=ft.next()).done);st=!0){var pt=lt.value;if("./index.js"!==pt){var ht=pt.replace(/^\.\//,"").replace(/\.js$/,""),dt=ht.split("/"),vt=wt(tt,dt);vt[ht=dt.pop()]=gt(pt),vt[ht].namespaced=!0}}}catch(t){ct=!0,ut=t}finally{try{!st&&ft.return&&ft.return()}finally{if(ct)throw ut}}}var mt=tt instanceof Function?tt:function(){return new G.a.Store(Y()({},tt,{state:tt.state instanceof Function?tt.state():{}}))};function gt(t){var e=X(t),n=e.default||e;if(n.commit)throw new Error("[lavas] store/"+t.replace("./","")+" should export a method which returns a Vuex instance.");if(n.state&&"function"!=typeof n.state)throw new Error("[lavas] state should be a function in store/"+t.replace("./",""));return n}function wt(t,e){if(1===e.length)return t.modules;var n=e.shift(),r=t.modules[n]=t.modules[n]||{};return r.namespaced=!0,r.modules=r.modules||{},wt(r,e)}var yt=!1,bt={name:"updateToast",props:{text:{type:String,default:"站点发生更新，请手动刷新"}},data:function(){return{show:!1}},mounted:function(){window.addEventListener("sw.update",this.showUpdate),navigator.serviceWorker&&navigator.serviceWorker.addEventListener("controllerchange",this.handleSWChange)},beforeDestroy:function(){window.removeEventListener("sw.update",this.showUpdate),navigator.serviceWorker&&navigator.serviceWorker.removeEventListener("controllerchange",this.handleSWChange)},methods:{showUpdate:function(t){this.show=!0},handleRefresh:function(){try{navigator.serviceWorker.getRegistration().then(function(t){t.waiting.postMessage("skipWaiting")})}catch(t){window.location.reload()}},handleSWChange:function(){yt||(yt=!0,window.location.reload())}}};var _t=function(t){n("tEr3")},xt={name:"app",components:{UpdateToast:Object(P.a)(bt,function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"popup"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"show"}],staticClass:"update-toast"},[e("span",[this._v(this._s(this.text))]),this._v(" "),e("span",{staticClass:"update-toast-close-btn",on:{click:this.handleRefresh}},[e("i",{staticClass:"iconfont icon-refresh"})])])])},[],!1,_t,"data-v-7791f3b2",null).exports},computed:b()({},Object(G.c)("pageTransition",{pageTransitionType:function(t){return t.type},pageTransitionEffect:function(t){return t.effect}}),Object(G.c)("scrollBehavior",{scrollPostionMap:function(t){return t.scrollPostionMap}}),{pageTransitionClass:function(){return"transition-"+this.pageTransitionType},routerViewKey:function(){var t=this.$route,e=t.name,n=t.params,r=L()(n);return r.length?e+r.reduce(function(t,e){return t+n[e]},""):null}}),data:function(){return{keepAlivePages:H}},methods:b()({},Object(G.b)("scrollBehavior",["savePageScrollPosition"]),{restoreContainerScrollPosition:function(t,e){t.classList.add("app-view-scroll-enabled"),t.scrollTop=e},restoreBodyScrollPosition:function(t,e){t.classList.remove("app-view-scroll-enabled"),document.body.scrollTop=document.documentElement.scrollTop=e},handleBeforeEnter:function(t){var e=this,n=t.dataset.pageId,r=(this.scrollPostionMap[n]||{}).y,a=void 0===r?0:r;f.a.nextTick(function(){e.restoreContainerScrollPosition(t,a)})},handleAfterEnter:function(t){var e=t.dataset.pageId,n=(this.scrollPostionMap[e]||{}).y,r=void 0===n?0:n;this.restoreBodyScrollPosition(t,r)},handleBeforeLeave:function(t){var e=t.dataset.pageId,n=document.body.scrollTop||document.documentElement.scrollTop;this.restoreContainerScrollPosition(t,n),this.savePageScrollPosition({pageId:e,scrollPosition:{y:n}})}})};var Tt=function(t){n("StHe")},kt=Object(P.a)(xt,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("transition",{attrs:{name:t.pageTransitionEffect},on:{"before-enter":t.handleBeforeEnter,"after-enter":t.handleAfterEnter,"before-leave":t.handleBeforeLeave}},[n("keep-alive",{attrs:{include:[].concat(t.keepAlivePages)}},[n("router-view",{key:t.routerViewKey,class:["app-view",t.pageTransitionClass],attrs:{"data-page-id":t.$route.fullPath}})],1)],1),t._v(" "),n("update-toast")],1)},[],!1,Tt,null,null).exports;n("voFv"),n("D0oh"),n("zDzK");f.a.use(O.b),f.a.use(x.a),f.a.config.productionTip=!1;var Pt={data:function(){return{percent:0,show:!1,canSuccess:!0,duration:3e3,height:"2px",color:"#ffca2b",failedColor:"#ff0000"}},methods:{start:function(){var t=this;return this.show=!0,this.canSuccess=!0,this._timer&&(clearInterval(this._timer),this.percent=0),this._cut=1e4/Math.floor(this.duration),this._timer=setInterval(function(){t.increase(t._cut*Math.random()),t.percent>95&&t.finish()},100),this},set:function(t){return this.show=!0,this.canSuccess=!0,this.percent=Math.floor(t),this},get:function(){return Math.floor(this.percent)},increase:function(t){return this.percent=this.percent+Math.floor(t),this},decrease:function(t){return this.percent=this.percent-Math.floor(t),this},finish:function(){return this.percent=100,this.hide(),this},pause:function(){return clearInterval(this._timer),this},hide:function(){var t=this;return clearInterval(this._timer),this._timer=null,setTimeout(function(){t.show=!1,t.$nextTick(function(){setTimeout(function(){t.percent=0},200)})},500),this},fail:function(){return this.canSuccess=!1,this}}};var Et=function(t){n("5dq4")},Ct=Object(P.a)(Pt,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"progress",style:{width:this.percent+"%",height:this.height,"background-color":this.canSuccess?this.color:this.failedColor,opacity:this.show?1:0}})},[],!1,Et,"data-v-5fa349a2",null).exports,Lt=n("WylL"),St=n.n(Lt),jt=n("eFXI"),At=n.n(jt);n("FhU4"),n("CJsk");St.a.shim(),At.a.shim();var It=f.a.prototype.$loading=new f.a(Ct).$mount(),$t=function(){var t=function(){var t=new T.a({mode:"history",base:"/cnode-webapp/",scrollBehavior:F,routes:V});return t.beforeEach(function(e,n,r){t.app.$store&&t.app.$store.state.pageTransition.enable&&(t.app.$store.commit("pageTransition/setType","fade"),t.app.$store.commit("pageTransition/setEffect","fade")),r()}),t}(),e=mt();return{App:f.a.extend(b()({router:t,store:e},kt)),router:t,store:e}}(),Mt=$t.App,Ot=$t.router,Wt=$t.store,Dt=w.a.build,qt=Dt.ssr,Rt=Dt.cssExtract,Nt=w.a.middleware,zt=void 0===Nt?{}:Nt,Bt=w.a.skeleton,Ut=Bt.enable,Vt=Bt.asyncCSS,Ft=void 0;window.__INITIAL_STATE__&&Wt.replaceState(window.__INITIAL_STATE__),"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),document.body.appendChild(It.$el),f.a.mixin({beforeRouteUpdate:function(){var t=l()(c.a.mark(function t(e,n,r){var a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(a=this.$options.asyncData)?(It.start(),a.call(this,{store:this.$store,route:e}).then(function(){It.finish(),r()}).catch(r)):r();case 2:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}()});var Ht=!0;if(function(){var t=this;Ot.beforeEach(function(){var e=l()(c.a.mark(function e(n,r,a){var o,s,u,l,f,m,g;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(Ht||n.path!==r.path){t.next=2;break}return t.abrupt("return",a());case 2:return Ht=!1,o=Ot.getMatchedComponents(n),s=[].concat(i()(zt.all||[]),i()(zt.client||[]),i()(o.filter(function(t){var e=t.middleware;return!!e}).reduce(function(t,e){var n=e.middleware;return t.concat(n)},[]))),t.next=7,h(s);case 7:if(u=t.sent,!(l=s.find(function(t){return"function"!=typeof u[t]}))){t.next=11;break}throw new Error("Unknown middleware "+l);case 11:return f=!1,m=d({to:n,from:r,store:Wt,next:function(t){if(It.finish&&It.finish(),!f){if(f=!0,t.external)return t.query=Object(p.stringify)(t.query),t.path=t.path+(t.query?"?"+t.query:""),window.location.replace(t.path),a();a(t)}}},Ft),g=s.map(function(t){return u[t]}),t.next=17,v(g,m);case 17:f||a();case 18:case"end":return t.stop()}},e,t)}));return function(t,n,r){return e.apply(this,arguments)}}())}(),!document.body.hasAttribute("empty-appshell")&&qt)Ft=new Mt,Ot.onReady(function(){Yt(),Ft.$mount("#app")});else{var Jt=Ut&&Vt&&Rt;window.mountLavas=function(){setTimeout(function(){var t=document.querySelector("#app");t&&(t.innerHTML=""),Ft.$mount("#app")},0)},Yt(),Ft=new Mt,(qt||!Jt||Jt&&window.STYLE_READY)&&window.mountLavas()}function Yt(){var t=this;Ot.beforeResolve(function(e,n,r){var o=Ot.getMatchedComponents(e),i=Ot.getMatchedComponents(n),s=!1,u=o.filter(function(t,e){return s||(s=i[e]!==t)});if(!u.length)return r();It.start(),a.a.all(u.filter(function(t){return t.asyncData&&(!t.asyncDataFetched||!e.meta.keepAlive)}).map(function(){var n=l()(c.a.mark(function n(r){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.asyncData({store:Wt,route:e});case 2:r.asyncDataFetched=!0;case 3:case"end":return t.stop()}},n,t)}));return function(t){return n.apply(this,arguments)}}())).then(function(){It.finish(),r()}).catch(r)})}},tEr3:function(t,e){},voFv:function(t,e){},zDzK:function(t,e){}},[0]);
//# sourceMappingURL=index.ff603bfa.js.map